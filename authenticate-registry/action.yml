name: Authenticate internal registry
description: Authenticate internal registry

inputs:
  uri:
    description: Registry URI
    required: true

  password:
    description: Registry password
    required: true

runs:
  using: composite
  steps:
    - name: Creating global .npmrc file
      run: touch ~/.npmrc
      shell: bash

    - name: Appending scoped @stardust registry
      run: echo "@stardust:registry=https:${{ inputs.uri }}/" >> ~/.npmrc
      shell: bash

    - name: Appending registry password
      run: echo "${{ inputs.uri }}/:_password=${{ inputs.password }}" >> ~/.npmrc
      shell: bash

    - name: Appending registry username
      run: echo "${{ inputs.uri }}/:username=_json_key_base64" >> ~/.npmrc
      shell: bash

    - name: Appending registry email
      run: echo "${{ inputs.uri }}/:email=not.valid@email.com" >> ~/.npmrc
      shell: bash
